<!doctype html><html lang=zh dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='
  试试写一个魔女裁判
  
  #
  



  让我们来写一个简单的裁判
  
  #
  






  初始化裁判庭剧本
  
  #
  

创建裁判庭初始化脚本TrialInit.nani，修改其中的设置
主要关注点为出场人物，不出场的人物ID设为-1即可
;设置出场人物位置ID，为-1的话就是未出席
@set "emaIdx = 0"
@set "hiroIdx = 3"
@set "meruruIdx = -1"
@set "hannaIdx = 6"
@set "sherryIdx = 9"
@set "ananIdx = -1"
@set "leiaIdx = -1"
@set "cocoIdx = -1"
@set "miriaIdx = -1"
@set "margoIdx = -1"
@set "noahIdx = -1"
@set "nanokaIdx = -1"
@set "alisaIdx = -1"
@set "yukiIdx = -1"
@set "wardenIdx = -1"
@set "jailerIdx = -1"



  调用游戏自身的初始化剧本
  
  #
  

调用初始化剧本：SherryAppleJuice_ExampleTrialMod/TrialInit和System/System_Subroutine.EndTrial。'><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="http://manosabamoddoc.fuyumi.xyz/docs/QuickStart/BeginTrial/"><meta property="og:site_name" content="雪莉的剧本编辑器"><meta property="og:title" content="试试写一个魔女裁判"><meta property="og:description" content='试试写一个魔女裁判 # 让我们来写一个简单的裁判 # 初始化裁判庭剧本 # 创建裁判庭初始化脚本TrialInit.nani，修改其中的设置
主要关注点为出场人物，不出场的人物ID设为-1即可
;设置出场人物位置ID，为-1的话就是未出席 @set "emaIdx = 0" @set "hiroIdx = 3" @set "meruruIdx = -1" @set "hannaIdx = 6" @set "sherryIdx = 9" @set "ananIdx = -1" @set "leiaIdx = -1" @set "cocoIdx = -1" @set "miriaIdx = -1" @set "margoIdx = -1" @set "noahIdx = -1" @set "nanokaIdx = -1" @set "alisaIdx = -1" @set "yukiIdx = -1" @set "wardenIdx = -1" @set "jailerIdx = -1" 调用游戏自身的初始化剧本 # 调用初始化剧本：SherryAppleJuice_ExampleTrialMod/TrialInit和System/System_Subroutine.EndTrial。'><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2025-09-06T15:32:01+08:00"><title>试试写一个魔女裁判 | 雪莉的剧本编辑器</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=http://manosabamoddoc.fuyumi.xyz/docs/QuickStart/BeginTrial/><link rel=stylesheet href=/book.min.f983b1133075f34a464000952394d7dd8ca4b6c8f419ca5ae47d914318121017.css integrity="sha256-+YOxEzB180pGQACVI5TX3Yyktsj0Gcpa5H2RQxgSEBc=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/zh.search.min.a745bd2f4a05a6946d0b282cc64758b0ee4c27e03eb8d296de3f08a260c81ea8.js integrity="sha256-p0W9L0oFppRtCygsxkdYsO5MJ+A+uNKW3j8IomDIHqg=" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-docs"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.png alt=Logo><span>雪莉的剧本编辑器</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><input type=checkbox id=section-52b5154487ff06b89e9868121921b268 class=toggle>
<label for=section-52b5154487ff06b89e9868121921b268 class=flex><a role=button class=flex-auto>介绍</a></label><ul><li><a href=/docs/Intruduce/ForUser/>给使用的人</a></li><li><a href=/docs/Intruduce/ForDeveloper/>给想写剧本的人</a></li></ul></li><li class=book-section-flat><a href=/docs/Install/>安装与卸载</a><ul></ul></li><li class=book-section-flat><input type=checkbox id=section-096e5f72c7ef5d62a972e4a2046cf5fb class=toggle checked>
<label for=section-096e5f72c7ef5d62a972e4a2046cf5fb class=flex><a role=button class=flex-auto>快速开始一段创作</a></label><ul><li><a href=/docs/QuickStart/CreateMod/>创建新的剧本</a></li><li><a href=/docs/QuickStart/BeginAdv/>开始一个简单的对话</a></li><li><a href=/docs/QuickStart/BeginTrial/ class=active>试试写一个魔女裁判</a></li><li><a href=/docs/QuickStart/Tips/>小贴士</a></li></ul></li><li class=book-section-flat><a href=/docs/ModConfig/>Mod配置</a><ul></ul></li><li class=book-section-flat><input type=checkbox id=section-85b6c0237bbcba5efb9e89acf039eea2 class=toggle>
<label for=section-85b6c0237bbcba5efb9e89acf039eea2 class=flex><a role=button class=flex-auto>进阶文档</a></label><ul><li><a href=/docs/Advanced/Command/>指令介绍</a></li><li><a href=/docs/Advanced/LoadBackgrounds/>加载外部背景资源</a></li><li><a href=/docs/Advanced/LoadVoice/>加载外部音频资源</a></li><li><a href=/docs/Advanced/MoreNaniFile/>本地化配置</a></li><li><a href=/docs/Advanced/LoadCharacter/>加载外部立绘资源</a></li></ul></li><li class=book-section-flat><input type=checkbox id=section-0179ebec185e705019125ac32129ed53 class=toggle>
<label for=section-0179ebec185e705019125ac32129ed53 class=flex><a role=button class=flex-auto>其它说明</a></label><ul><li><a href=/docs/Others/AQ/>碎碎念</a></li><li><a href=/docs/Others/UsefulTools/>一些有用的工具</a></li></ul></li></ul><ul><li><a href=https://github.com/IrisuM/ManosabaMod/ target=_blank rel=noopener>Github</a></li><li><a href=https://space.bilibili.com/1265680561/ target=_blank rel=noopener>关注永雏塔菲谢谢喵！</a></li><li><a href=https://space.bilibili.com/3546949672241842/ target=_blank rel=noopener>关注我谢谢喵！</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>试试写一个魔女裁判</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#试试写一个魔女裁判>试试写一个魔女裁判</a><ul><li><a href=#让我们来写一个简单的裁判>让我们来写一个简单的裁判</a><ul><li><a href=#初始化裁判庭剧本>初始化裁判庭剧本</a></li><li><a href=#调用游戏自身的初始化剧本>调用游戏自身的初始化剧本</a></li><li><a href=#设置裁判超时坏结局>设置裁判超时坏结局</a></li><li><a href=#完整样例>完整样例</a></li></ul></li><li><a href=#如果出现红字>如果出现红字</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=试试写一个魔女裁判>试试写一个魔女裁判
<a class=anchor href=#%e8%af%95%e8%af%95%e5%86%99%e4%b8%80%e4%b8%aa%e9%ad%94%e5%a5%b3%e8%a3%81%e5%88%a4>#</a></h1><hr><h2 id=让我们来写一个简单的裁判>让我们来写一个简单的裁判
<a class=anchor href=#%e8%ae%a9%e6%88%91%e4%bb%ac%e6%9d%a5%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%e8%a3%81%e5%88%a4>#</a></h2><hr><div class=book-steps><ol><li><h3 id=初始化裁判庭剧本>初始化裁判庭剧本
<a class=anchor href=#%e5%88%9d%e5%a7%8b%e5%8c%96%e8%a3%81%e5%88%a4%e5%ba%ad%e5%89%a7%e6%9c%ac>#</a></h3><p>创建裁判庭初始化脚本TrialInit.nani，修改其中的设置</p><p>主要关注点为出场人物，不出场的人物ID设为-1即可</p><pre tabindex=0><code>;设置出场人物位置ID，为-1的话就是未出席
@set &#34;emaIdx = 0&#34;
@set &#34;hiroIdx = 3&#34;
@set &#34;meruruIdx = -1&#34;
@set &#34;hannaIdx = 6&#34;
@set &#34;sherryIdx = 9&#34;
@set &#34;ananIdx = -1&#34;
@set &#34;leiaIdx = -1&#34;
@set &#34;cocoIdx = -1&#34;
@set &#34;miriaIdx = -1&#34;
@set &#34;margoIdx = -1&#34;
@set &#34;noahIdx = -1&#34;
@set &#34;nanokaIdx = -1&#34;
@set &#34;alisaIdx = -1&#34;
@set &#34;yukiIdx = -1&#34;
@set &#34;wardenIdx = -1&#34;
@set &#34;jailerIdx = -1&#34;
</code></pre></li><li><h3 id=调用游戏自身的初始化剧本>调用游戏自身的初始化剧本
<a class=anchor href=#%e8%b0%83%e7%94%a8%e6%b8%b8%e6%88%8f%e8%87%aa%e8%ba%ab%e7%9a%84%e5%88%9d%e5%a7%8b%e5%8c%96%e5%89%a7%e6%9c%ac>#</a></h3><p>调用初始化剧本：<strong>SherryAppleJuice_ExampleTrialMod/TrialInit</strong>和<strong>System/System_Subroutine.EndTrial</strong>。</p><p>在对话剧本的首尾通过<a href=/docs/Advanced/Command/#gosub>gosub</a>分别执行这两个初始化剧本</p><pre tabindex=0><code>;初始化日常活动状态
@gosub SherryAppleJuice_ExampleTrialMod/TrialInit
</code></pre><pre tabindex=0><code>;结束裁判状态
@gosub System/System_Subroutine.EndTrial
</code></pre></li><li><h3 id=设置裁判超时坏结局>设置裁判超时坏结局
<a class=anchor href=#%e8%ae%be%e7%bd%ae%e8%a3%81%e5%88%a4%e8%b6%85%e6%97%b6%e5%9d%8f%e7%bb%93%e5%b1%80>#</a></h3><p>通过timer指令设置倒计时</p><p>通过set指令设置超时坏结局XXX，并创建Common/Common+XXX.nani文件，这个剧本文件就是坏结局的入口</p><pre tabindex=0><code>;设置倒计时
@timer 30
;设置坏结局
@set &#34;commonBadEndId=\&#34;SherryAppleJuice_ExampleTrialMod00\&#34;&#34;
</code></pre></li><li><h3 id=完整样例>完整样例
<a class=anchor href=#%e5%ae%8c%e6%95%b4%e6%a0%b7%e4%be%8b>#</a></h3><p>SherryAppleJuice_ExampleTrialMod/Main.nani</p><pre tabindex=0><code>;初始化裁判状态
@gosub SherryAppleJuice_ExampleTrialMod/TrialInit

;设置倒计时
@timer 30
;设置坏结局
@set &#34;commonBadEndId=\&#34;SherryAppleJuice_ExampleTrialMod00\&#34;&#34;

;隐藏日常UI并显示裁判UI
@HideUI ControlPanel
@ShowUI DebateUI

;裁判循环起点
# Judge00

;裁判循环起点初始化
@gosub System/System_Subroutine.BeginDebate-First
;播放裁判循环起点特效
@gosub System/System_Subroutine.BeginDebate-Effect
@gosub System/System_Subroutine.BeginDebate-Last

;裁判开始倒计时
@pauseTrial false

;隐藏正交相机的场景，展示出裁判庭的3D场景
@hideStageScreen 1

;将最上面原本黑色的Overlay遮罩层变为透明，同时还指定了动画时间
@back SubId:&#34;Overlay&#34; Transparent tint:&#34;#000000&#34; time:0.9

;将镜头设置到艾玛脸上
@char Ema.Smile1
@gosubModifyCamera 0 look:&#34;Ema&#34; comp:&#34;Left&#34; rollDir:&#34;Right&#34; zoomLvl:3
@printDebate pos:70,50 Roll:4 &#34;这是一个测试用例，&lt;br&gt;我来客串一下。&#34;
@printDebate pos:70,50 Roll:4 &#34;我在左边，字在右边&#34;

;将镜头设置到艾玛脸上，换个方向
@char Ema.Smile1
@gosubModifyCamera 0 look:&#34;Ema&#34; comp:&#34;Center&#34; zoomLvl:3
@printDebate pos:50,30 Roll:4 &#34;我在中间，字在下面。&#34;

;将镜头设置到艾玛脸上，换个方向
@char Ema.Angry1
@gosubModifyCamera 0 look:&#34;Ema&#34; comp:&#34;Right&#34; rollDir:&#34;Left&#34; zoomLvl:3
@printDebate pos:30,50 Roll:4 &#34;我在右边，字在左边。&#34;

;雪莉说了一个破绽
@char Sherry.Smile1
@gosubModifyCamera 0 look:&#34;Sherry&#34; comp:&#34;Left&#34; rollDir:&#34;Right&#34; zoomLvl:3
@printDebate pos:70,50 Roll:4 &#34;这里有一个&lt;link=&#34;Right_Choice_000&#34;&gt;关键词&lt;/link&gt;，点进去就可以进入选项分支啦。&#34;

;裁判循环终点初始化
@Gosub System/System_Subroutine.EndDebate-First
@pauseTrial true
;播放裁判循环终点特效
@gosub System/System_Subroutine.EndDebate-Effect
@gosub System/System_Subroutine.EndDebate-Last

;显示正交相机的场景
@showStageScreen 1
Ema: 到这里一轮辩论就结束啦
Ema: 接下来准备继续循环

;回到裁判循环起点
@goto .Judge00

# Right_Choice_000
;暂停倒计时
@pauseTrial true timer:true
@choice &#34;这个是正确的选项分支&#34; button:&#34;ChoiceButtons/Trial/Approval&#34; handler:&#34;Trial&#34;
   ;播放有效
   @sfx &#34;Sfx_System_SaveData_001_2x&#34;
   ;停止播放语音
   @StopVoice
   ;关闭返回，使用这个指令后，点击选项就不会回到辩论循环了
   @CancelGosub
   ;跳转到目标剧情
   @goto .Right_Adv_000
@choice &#34;这个是错误的选项分支&#34; button:&#34;ChoiceButtons/Trial/Objection&#34; handler:&#34;Trial&#34;
   @sfx &#34;Sfx_System_SaveData_001_2x&#34;
   @StopVoice
   @CancelGosub
   @goto .Error_Adv_000
@choice &#34;返回&#34; button:&#34;ChoiceButtons/Trial/Cancel&#34; handler:&#34;Trial&#34;
   @pauseTrial false timer:true
   @Wait &#34;i{debateWaitTime}&#34;
   @Return

@StopForChoice Clear:false

# Right_Adv_000
@gosub System/System_Subroutine.EndDebate-First
@pauseTrial false timer:false
@gosub System/System_Subroutine.EndDebate-Last

@char Hanna.Smile1
@gosubModifyCamera 0 look:&#34;Hanna&#34; comp:&#34;Center&#34;
Hanna: 这个是正确的选项~
;跳转到正确的路线
@goto .Right_End

# Error_Adv_000
@gosub System/System_Subroutine.EndDebate-First
@pauseTrial false timer:false
@gosub System/System_Subroutine.EndDebate-Last

@char Hanna.Angry1
@gosubModifyCamera 0 look:&#34;Hanna&#34; comp:&#34;Center&#34;
Hanna: 这个是错误的选项！
Hanna: 我要返回到辩论循环让你重新选择了。
@goto .Judge00

# Right_End
;显示日常UI并隐藏裁判UI
@HideUI DebateUI
@ShowUI ControlPanel

@char Ema.Smile1
@gosubModifyCamera 0 look:&#34;Ema&#34; comp:&#34;Center&#34;
Ema: 裁判教程到这里就结束啦。

@gosub System/System_Subroutine.EndTrial

;跳转到结束
@goto SherryAppleJuice_ExampleTrialMod/Tools.EndToTitle
</code></pre><p>SherryAppleJuice_ExampleTrialMod/TrialInit.nani</p><pre tabindex=0><code>;设置审判庭地点，有Court和CourtFinal两种，后者是决战时使用的版本
@set &#34;stageName=\&#34;Court\&#34;&#34;
;设置出庭人数，正常情况下是13个
@set &#34;courtStandCount = 13&#34;

;设置出场人物位置ID，为-1的话就是未出席
@set &#34;emaIdx = 0&#34;
@set &#34;hiroIdx = 3&#34;
@set &#34;meruruIdx = -1&#34;
@set &#34;hannaIdx = 6&#34;
@set &#34;sherryIdx = 9&#34;
@set &#34;ananIdx = -1&#34;
@set &#34;leiaIdx = -1&#34;
@set &#34;cocoIdx = -1&#34;
@set &#34;miriaIdx = -1&#34;
@set &#34;margoIdx = -1&#34;
@set &#34;noahIdx = -1&#34;
@set &#34;nanokaIdx = -1&#34;
@set &#34;alisaIdx = -1&#34;
@set &#34;yukiIdx = -1&#34;
@set &#34;wardenIdx = -1&#34;
@set &#34;jailerIdx = -1&#34;

;初始化裁判
@gosub System/System_Subroutine.BeginTrial

@return
</code></pre><p>Common/CommonBadSherryAppleJuice_ExampleTrialMod00.nani</p><pre tabindex=0><code>;初始化日常活动状态
@gosub System/System_Subroutine.BeginAdv

;显示背景
@back 5_1 Scale:{g_backgroundDefaultScale}
;将最上面原本黑色的Overlay遮罩层变为透明，同时还指定了动画时间
@back SubId:&#34;Overlay&#34; Transparent tint:&#34;#000000&#34; time:0.99 wait:true

;显示艾玛
@char Ema pos:50,50
;艾玛说话
Ema: 这是一个Bad End。

;隐藏全部角色
@hideChars

;结束化日常活动状态
@gosub System/System_Subroutine.EndAdv

;跳转到结束
@goto SherryAppleJuice_ExampleMod/Tools.EndToTitle
</code></pre></li></ol></div><hr><h2 id=如果出现红字>如果出现红字
<a class=anchor href=#%e5%a6%82%e6%9e%9c%e5%87%ba%e7%8e%b0%e7%ba%a2%e5%ad%97>#</a></h2><details><summary>Failed to load localization document for XXX</summary><div class=markdown-inner><p><strong>如果控制台出现红字 <font color=Red>Failed to load localization document for XXX</font></strong></p><p>这个报错是本地化配置相关，<a href=/docs/Advanced/MoreNaniFile/>参考这里~</a>：</p><p><img src=/images/LocalizationFileError.png alt=本地化配置错误></p></div></details></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><div class="flex flex-wrap justify-between"><span><a href=/docs/QuickStart/BeginAdv/ class="flex align-center book-icon"><img src=/svg/backward.svg class=book-icon alt=Previous title=开始一个简单的对话>
<span>开始一个简单的对话</span>
</a></span><span><a href=/docs/QuickStart/Tips/ class="flex align-center book-icon"><span>小贴士</span>
<img src=/svg/forward.svg class=book-icon alt=Next title=小贴士></a></span></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><!doctype html><html><head><script src=http://manosabamoddoc.fuyumi.xyz/background/sakura.js></script></head><body></body></html></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#试试写一个魔女裁判>试试写一个魔女裁判</a><ul><li><a href=#让我们来写一个简单的裁判>让我们来写一个简单的裁判</a><ul><li><a href=#初始化裁判庭剧本>初始化裁判庭剧本</a></li><li><a href=#调用游戏自身的初始化剧本>调用游戏自身的初始化剧本</a></li><li><a href=#设置裁判超时坏结局>设置裁判超时坏结局</a></li><li><a href=#完整样例>完整样例</a></li></ul></li><li><a href=#如果出现红字>如果出现红字</a></li></ul></li></ul></nav></div></aside></main></body></html>