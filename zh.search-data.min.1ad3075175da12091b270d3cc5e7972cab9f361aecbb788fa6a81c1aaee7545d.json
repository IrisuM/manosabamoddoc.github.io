[{"id":0,"href":"/docs/QuickStart/CreateMod/","title":"创建新的剧本","section":"快速开始一段创作","content":" 创建新的剧本 # 从模板创建 # 剧本模板 # 打开Mod安装包，在ManosabaMod目录下找到SherryAppleJuice_ExampleMod文件夹 复制模板 # 复制整个文件夹，将文件夹改名为你的剧本ID\n建议剧本ID按照一个不容易重复的英文ID+剧本英文名称+一个数字编号这样的格式，这里的英文ID可以用一个个性的网名，随机乱码或者你的B站UID，尽量避免和别人产生碰撞就行\n比如 SherryAppleJuice_TestMod000，其中SherryAppleJuice是网名，TestMod是本英文名称，000是编号\n如果剧本ID冲突\n剧本ID冲突的话，就会出现剧本里的内容相互穿越的情况\n修改目录 # 修改目录结构，将原来叫做SherryAppleJuice_ExampleMod的文件夹全部改为新的剧本ID，类似这样\n修改配置 # 进入新的剧本文件夹，修改info.json文件\n{ \u0026#34;Name\u0026#34;:\u0026#34;测试用例\u0026#34;, \u0026#34;Description\u0026#34;:\u0026#34;测试用例\u0026#34;, \u0026#34;Author\u0026#34;:\u0026#34;雪莉苹果汁\u0026#34;, \u0026#34;Enter\u0026#34;:\u0026#34;SherryAppleJuice_ExampleMod/Main\u0026#34;, \u0026#34;Version\u0026#34;:\u0026#34;1.0.0\u0026#34; } 打开info.json文件，将上面的json字符串复制进去\n按照自己的需要修改各个属性，Name是你的剧本名字，Description是剧本描述，Author是你想留下来的笔名，Version是剧本的版本\n关键点是Enter，这个属性的含义是你的剧本的入口点。内容是相对于Scripts目录的剧本入口文件的相对路径\n这里样例剧本的入口点文件为SherryAppleJuice_TestMod000\\Scripts\\SherryAppleJuice_TestMod000\\Main.nani，那么Enter的相对路径为SherryAppleJuice_TestMod000\\Main\n修改后的样子大概是：\n{ \u0026#34;Name\u0026#34;:\u0026#34;修改后的剧本名称\u0026#34;, \u0026#34;Description\u0026#34;:\u0026#34;修改后的剧本描述\u0026#34;, \u0026#34;Author\u0026#34;:\u0026#34;你的名字，不要填韦一敏\u0026#34;, \u0026#34;Enter\u0026#34;:\u0026#34;SherryAppleJuice_TestMod000/Main\u0026#34;, \u0026#34;Version\u0026#34;:\u0026#34;1.0.0\u0026#34; } 修改剧本内跳转 # 打开剧本内的.nani格式文件，搜索所有的SherryAppleJuice_ExampleMod，替换为你的新剧本ID，类似这样：\n完成 # 这样一个新的剧本就完成啦！启动游戏点击开始游戏，就可以看到你的剧本了，把这个剧本文件夹发给其它小伙伴，也可以看到这个剧本啦\n"},{"id":1,"href":"/docs/Install/","title":"安装与卸载","section":"Docs","content":" 安装与卸载 # 注意，使用Mod前记得保存原有的存档！\n虽然目前未发现损坏存档的情况，但是小心驶得万年船\n安装 # 下载安装包 # 下载Mod安装包\n安装文件 # 打开游戏根目录 将Mod安装包解压到游戏目录即可 请注意解压后的文件夹，确保图中红色的部分和游戏exe在同一级目录 # 如果不在同一级目录，可能是因为解压导致 Mod 外面多包了一层，复制出来就行\n完成 # 最后启动游戏，初次启动或游戏版本更新后启动时间较久，请稍等\n如果安装后游戏无法开启 # Failed to generate Il2Cpp interop assemblies 如果控制台出现红字 Failed to generate Il2Cpp interop assemblies\n这个报错是下载unity-libs组件失败，可能您的网络环境将下载地址屏蔽了。\n删除不可用的下载链接 #\n文本格式打开manosaba_game\\BepInEx\\config\\BepInEx.cfg文件，删除“UnityBaseLibrariesSource”后面的网址链接\n一定要删除，否则框架会自动清理下一步手动复制的文件\n手动复制文件 #\n手动从日志中的网址或交流群文件中下载压缩包，并解压到 manosaba_game\\BepInEx\\unity-libs 目录下\n完成 #\n卸载 # 删除文件 # 删除游戏目录下被解压的文件即可 "},{"id":2,"href":"/docs/Intruduce/ForUser/","title":"给使用的人","section":"介绍","content":" 给使用的人 # 我该从哪里获取到Mod框架？ # 可以在安装说明里找到下载地址，如果访问Github存在困难的话，也可以加入我们的群聊从群文件下载\n我该从哪里获取到可以玩的剧本？ # Mod框架内自带我写的一些渣作，如果你想游玩更好的内容，可以将这个Mod框架推荐给你喜欢的二创作者，来创作更多有趣的内容哦\n"},{"id":3,"href":"/docs/Intruduce/ForDeveloper/","title":"给想写剧本的人","section":"介绍","content":" 给想写剧本的人 # 关于这个Mod框架 # 《魔法少女的魔女裁判》是一款 Unity+NaniNovel 引擎开发的AVG游戏，而这个Mod框架则是基于BepInex实现对Unity引擎注入代码，将.nani剧本文件加载到NaniNovel引擎。\n因此本Mod框架加载的.nani脚本完全符合NaniNovel的官方标准，所使用的指令为官方支持的指令与游戏开发商自行开发的指令的合集。\n如果有一定的英语阅读能力，可以通过阅读NaniNovel的官方指引来快速掌握官方提供的基础引擎能力，而游戏开发商自行开发的指令，需要通过游戏内已有脚本反向推测功能。\n本文档也会继续完善部分指令的说明。\n想写剧本需要编程基础吗？会不会很难？ # 完全不需要编程基础，NaniNovel官方在剧本编写上做了非常友好的用户体验设计，基本不会出现代码逻辑相关的操作，只需要记住一些用于操作对话框，人物表情，背景变化的指令即可\n为什么不能直接提供解包资源和游戏自带剧本？ # 根据《魔法少女的魔女审判》直播・二次创作指南，不得超出二创范围使用拆包资源或者文字剧情，因此不提供任何现成的资源文件\n如果有二创需要，欢迎加入我们的群聊讨论，出于创作目的交流学习用的资源文件~\n我想发布我创作的剧本，有什么注意事项吗？ # 本Mod无额外要求，遵守官方《魔法少女的魔女审判》直播・二次创作指南即可\n如果愿意的话，在简介之类的地方提到我就很感谢了\n"},{"id":4,"href":"/docs/QuickStart/BeginAdv/","title":"开始一个简单的对话","section":"快速开始一段创作","content":" 开始一个简单的对话 # 让我们来写一个简短的对话剧本 # 调用游戏自身的初始化剧本 # 游戏自身准备了很多用于初始化的剧本，比如样例中的System/System_Subroutine.BeginAdv和System/System_Subroutine.EndAdv。\n在对话剧本的首尾通过gosub分别执行这两个初始化剧本，让游戏进入对话的模式\n当然，有对话模式，自然就有裁判模式，后续也会有用于初始化裁判模式的剧本\n;初始化日常活动状态 @Gosub System/System_Subroutine.BeginAdv ;结束化日常活动状态 @Gosub System/System_Subroutine.EndAdv 展示背景 # 通过back指令可以修改游戏的背景\n可以通过解包工具Assetripper解包背景图资源查看对应的编号，也可以直接查看游戏自带的剧本寻找自己需要的背景的编号\n先指定 5_1 为背景图，再指定黑色的遮罩层图层消失\n;显示背景 @back 5_1 ;将最上面原本黑色的Overlay遮罩层变为透明，同时还指定了动画时间 @back SubId:\u0026#34;Overlay\u0026#34; Transparent tint:\u0026#34;#000000\u0026#34; time:0.99 wait:true 显示人物 # 通过char指令显示人物，显示的方式一般是{人物ID}.{表情,左手,右手}\n人物ID和表情相关可以通过解包工具Assetripper解包人物立绘查看，也可以直接查看游戏自带的剧本寻找自己需要的编号\n;显示艾玛 @char Ema pos:50,50 ;显示雪莉，表情是Smile1 @char Sherry.Smile1 pos:30,50 ;显示汉娜，表情是Angry1，双手是状态2 @char Hanna.Angry1,ArmR2,ArmL2 pos:70,50 隐藏人物 # 隐藏角色立绘可以通过hide指令隐藏指定立绘，也可以通过hidechars指令隐藏所有角色立绘\n;隐藏艾玛 @hide Ema ;隐藏全部角色 @hideChars 打印文字 # 打印文字有多种方法，可以使用print指令打印文字，也可以直接通过人物ID: 对话或纯文本的格式实现打印文字\n@print \u0026#34;完美犯罪？这词真让人热血沸腾呢！\u0026#34; author:\u0026#34;Sherry\u0026#34; speed:1 waitInput:true Wait:true Ema: 这是一个测试用例，我来客串一下。 Ema: 再说一句就下线了。 这里是一段空白。 结束剧本 # 可以通过goto指令跳转到Mod安装包内的Tool.nani里的EndToTitle标签实现返回到标题页\n也可以通过returntotitle指令直接返回到标题页，不过直接执行这个指令，可能会导致部分UI没有被隐藏，在返回标题页后仍旧残留在界面上\n;跳转到结束 @goto SherryAppleJuice_ExampleMod/Tools.EndToTitle 完整样例 # ;初始化日常活动状态 @gosub System/System_Subroutine.BeginAdv ;显示背景 @back 5_1 ;将最上面原本黑色的Overlay遮罩层变为透明，同时还指定了动画时间 @back SubId:\u0026#34;Overlay\u0026#34; Transparent tint:\u0026#34;#000000\u0026#34; time:0.99 wait:true ;显示艾玛 @char Ema pos:50,50 ;艾玛说话 Ema: 这是一个测试用例，我来客串一下。 Ema: 再说一句就下线了。 ;隐藏艾玛 @hide Ema 这里是一段空白。 ;显示雪莉，表情是Smile1 @char Sherry.Smile1 pos:30,50 ;雪莉说话 Sherry: 这是一个测试用例，我也来客串一下。 Sherry: 接下来请汉娜出场。 ;显示汉娜，表情是Angry1，双手是状态2 @char Hanna.Angry1,ArmR2,ArmL2 pos:70,50 ;汉娜说话 Hanna: 没事不要随便叫我出来啦。 ;隐藏全部角色 @hideChars ;结束化日常活动状态 @gosub System/System_Subroutine.EndAdv ;跳转到结束 @goto SherryAppleJuice_ExampleMod/Tools.EndToTitle 如果出现红字 # Failed to load localization document for XXX 如果控制台出现红字 Failed to load localization document for XXX\n这个报错是本地化配置相关，参考这里~：\n"},{"id":5,"href":"/docs/Others/AQ/","title":"碎碎念","section":"其它说明","content":" 施工中 # "},{"id":6,"href":"/docs/Advanced/Command/","title":"指令介绍","section":"进阶文档","content":" 指令介绍 # back back # 官方指令back\n设置背景元素\n参数 说明 subid 指定层级，靠前的层级会遮挡靠后的，比如Middle会遮挡不设置时的默认层级 @back SubId:\u0026#34;Middle\u0026#34; 1_1 pos:10,30 Scale:1.8 bgm bgm # 官方指令bgm\n设置背景音乐\n@bgm \u0026#34;Ambi_11_1\u0026#34; char char # 官方指令char\n修改人物立绘\n参数 说明 subid 指定层级，靠前的层级会遮挡靠后的，比如Middle会遮挡不设置时的默认层级 @char SubId:\u0026#34;Middle\u0026#34; Warden.1 Scale:1.4 gosub gosub # 官方指令gosub\n跳转到指定路径，并在遇到 return 指令后返回\ngoto goto # 官方指令goto\n跳转到指定路径\nhide hide # 官方指令hide\n隐藏指定的actor(角色, 背景, 文字框, 选择框)\nhidechars hidechars # 官方指令hidechars\n隐藏所有可见的角色\nprint print # 官方指令print\n打印文本\nreturn return # 官方指令return\n返回到gosub指令的调用处\nreturntotitle returntotitle # 游戏指令returntotitle\n返回标题页\n参数 说明 time 动画时长 delay 延迟时间 wait 是否等待 voice wait # 官方指令voice\n播放指定角色对话声音\nwait wait # 官方指令wait\n等待直到条件满足，条件通常为时间的浮点数\n"},{"id":7,"href":"/docs/ModConfig/","title":"Mod配置","section":"Docs","content":" Mod配置 # 本Mod工具对于仅使用的人来说是开箱即用的，所有的设置选项都是面向需要编写剧本的人\n配置文件在 manosaba_game\\BepInEx\\config 目录下\nBepInex设置 # 配置文件名为 BepInEx.cfg，这个是来自于BepInEx框架的配置\n如果你需要查看调试输出信息的话，需要将 [Logging.Console] 和 [Logging.Disk] 下的 LogLevels 配置改为All\nMod设置 # 配置文件名为 ManosabaLoader.cfg，这个是来自于本Mod框架的配置\n参数 说明 OpenDebug 是否开启调试模式 IsDirectMode 是否跳过剧本选择菜单，直接进入预设入口 ScriptEnter 预设入口剧本文件 ScriptEnterLabel 预设入口剧本标签 ModRootPath 剧本根目录，不建议修改 Debug模式说明 # 当 OpenDebug 被设置为 true 时，将开启以下功能：\n按下 ctrl + t 打开控制台。控制台为NaniNovel官方控制台，包括执行剧本指令、打开调试信息面板等功能\n按下 ctrl + r 强制注销除了当前剧本外的剧本。当你修改剧本后发现重新进入剧本但修改没有生效时使用，建议在主菜单使用，避免出现非预期错误\n转发游戏日志到BepInex的控制台\n打印游戏尝试加载的资源路径\n"},{"id":8,"href":"/docs/Advanced/LoadBackgrounds/","title":"加载外部背景资源","section":"进阶文档","content":" 加载外部背景资源 # 本Mod支持加载外部背景资源，支持jpg和png格式图片\n在二创剧本中使用 # 创建背景图片目录 # 在Mod目录下创建文件夹Backgrounds，然后在里面创建文件夹MainBackground，将你需要添加的背景文件放在里面。这里样例的图片名称为 TaffyCover.jpg\n通过back指令加载背景 # 直接使用back指令+你刚才的背景文件名即可，效果如图：\n;设置背景为刚才添加的图片 @back TaffyCover 替换游戏背景 # 获取原图背景图片目录 # 可以通过解包工具Assetripper解包背景图资源查看对应的编号，也可以直接查看游戏自带的剧本寻找自己需要的背景的编号\n游戏内背景路径由两部分组成，Id和图片名称编号，如这个例子\n@back 140_2 Id:\u0026#34;Stills\u0026#34; Scale:{g_backgroundDefaultScale} time:0 这里Id为 Stills，图片名称编号为 140_2\n那么图片的路径对应为 Backgrounds/Stills/140_2\n如果游戏没有指定Id，那么默认Id为MainBackground\n覆盖原图 # 获取到游戏原图目录后，将二创图片的路径和名称改为和游戏图片一致，就可以覆盖游戏原图了，Mod加载剧本和资源的优先级都高于游戏原本资源\n"},{"id":9,"href":"/docs/QuickStart/BeginTrial/","title":"试试写一个魔女裁判","section":"快速开始一段创作","content":" 试试写一个魔女裁判 # 如果出现红字 # Failed to load localization document for XXX 如果控制台出现红字 Failed to load localization document for XXX\n这个报错是本地化配置相关，参考这里~：\n"},{"id":10,"href":"/docs/Others/UsefulTools/","title":"一些有用的工具","section":"其它说明","content":" 一些有用的工具 # NaniNovel官方插件 # 在VsCode上使用的NaniNovel官方插件，可以将.nani格式的剧本文件语法高亮显示 Assetripper # Unity资源解包工具，可以用于查看游戏资源 "},{"id":11,"href":"/docs/Advanced/LoadVoice/","title":"加载外部音频资源","section":"进阶文档","content":" 加载外部音频资源 # 本Mod支持加载外部音频资源，支持wav格式\n在二创剧本中使用 # 创建背景图片目录 # 在Mod目录下创建文件夹Voice，将你需要添加的角色对话音频文件放在里面\n在Mod目录下创建文件夹Audio，将你需要添加的Bgm或音效音频文件放在里面\n通过bgm指令或voice指令播放音频 # 直接使用bgm指令或voice指令+你刚才的音频文件名即可：\n;播放Bgm_10_1 @bgm \u0026#34;Bgm_10_1\u0026#34; ;播放角色声音 TaffyStory000/Noah_01 @voice \u0026#34;TaffyStory000/Noah_01\u0026#34; 替换游戏音频 # 获取原图背景图片目录 # 可以通过解包工具Assetripper解包音频资源查看对应的编号，也可以直接查看游戏自带的剧本寻找自己需要的音频的编号\n覆盖原图 # 直接在Voice或者Audio目录下创建和游戏原音频同目录的二创音频文件即可\n"},{"id":12,"href":"/docs/Advanced/MoreNaniFile/","title":"本地化配置","section":"进阶文档","content":" 本地化配置 # 为什么需要创建本地化文件？ # 游戏支持中日双语，因此存在本地化机制，所有打印文本相关的指令都会涉及到读取本地化配置的操作\n因此，在创建剧本文件时，需要同步创建本地化文件\n如果一个剧本涉及本地化相关，但是没有本地化文件的话，就会出现如下报错：\n什么样的nani文件需要创建本地化配置呢？ # 包含类似打印文本，选择分支，人名的文本都需要\n如果你不确定的话，全部nani文件都创建本地化文件就行\n创建本地化文件 # 在Mod目录下创建文件夹Text\\Scripts\\你的剧本文件夹名称\n然后创建和nani文件同名的txt文件\n如果你只想做中文内容，留空文件就行，如果你想做双语剧本，按照官方本地化格式填写多语文本即可\n"},{"id":13,"href":"/docs/QuickStart/Tips/","title":"小贴士","section":"快速开始一段创作","content":" 小贴士 # 这里记录一些大家遇到的问题和编写技巧\n希望实时看到指令对应的背景或人物怎么办？ # 打开Mod的调试模式，按下ctrl+t可以开启控制台，在控制台中输入剧本指令执行即可\n有的时候我设置了背景后人物就不显示了 # 可以关注一下back和back指令的SubId属性，如果背景在人物前，就会出现遮挡人物的情况，尽量保证在同一个层级演出，不同层级用于场景过渡~\n如果我想做双语剧本怎么办 # 参考这里~\n"}]