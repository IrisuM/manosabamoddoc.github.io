[{"id":0,"href":"/docs/QuickStart/CreateMod/","title":"创建新的剧本","section":"快速开始一段创作","content":" 创建新的剧本 # 从模板创建 # 剧本模板 # 打开Mod安装包，在ManosabaMod目录下找到SherryAppleJuice_ExampleMod文件夹 复制模板 # 复制整个文件夹，将文件夹改名为你的剧本ID\n建议剧本ID按照一个不容易重复的英文ID+剧本英文名称+一个数字编号这样的格式，这里的英文ID可以用一个个性的网名，随机乱码或者你的B站UID，尽量避免和别人产生碰撞就行\n比如 SherryAppleJuice_TestMod000，其中SherryAppleJuice是网名，TestMod是本英文名称，000是编号\n如果剧本ID冲突\n剧本ID冲突的话，就会出现剧本里的内容相互穿越的情况\n修改目录 # 修改目录结构，将原来叫做SherryAppleJuice_ExampleMod的文件夹全部改为新的剧本ID，类似这样\n修改配置 # 进入新的剧本文件夹，修改info.json文件\n{ \u0026#34;Name\u0026#34;:\u0026#34;测试用例\u0026#34;, \u0026#34;Description\u0026#34;:\u0026#34;测试用例\u0026#34;, \u0026#34;Author\u0026#34;:\u0026#34;雪莉苹果汁\u0026#34;, \u0026#34;Enter\u0026#34;:\u0026#34;SherryAppleJuice_ExampleMod/Main\u0026#34;, \u0026#34;Version\u0026#34;:\u0026#34;1.0.0\u0026#34; } 打开info.json文件，将上面的json字符串复制进去\n按照自己的需要修改各个属性，Name是你的剧本名字，Description是剧本描述，Author是你想留下来的笔名，Version是剧本的版本\n关键点是Enter，这个属性的含义是你的剧本的入口点。内容是相对于Scripts目录的剧本入口文件的相对路径\n这里样例剧本的入口点文件为SherryAppleJuice_TestMod000\\Scripts\\SherryAppleJuice_TestMod000\\Main.nani，那么Enter的相对路径为SherryAppleJuice_TestMod000\\Main\n修改后的样子大概是：\n{ \u0026#34;Name\u0026#34;:\u0026#34;修改后的剧本名称\u0026#34;, \u0026#34;Description\u0026#34;:\u0026#34;修改后的剧本描述\u0026#34;, \u0026#34;Author\u0026#34;:\u0026#34;你的名字，不要填韦一敏\u0026#34;, \u0026#34;Enter\u0026#34;:\u0026#34;SherryAppleJuice_TestMod000/Main\u0026#34;, \u0026#34;Version\u0026#34;:\u0026#34;1.0.0\u0026#34; } 修改剧本内跳转 # 打开剧本内的.nani格式文件，搜索所有的SherryAppleJuice_ExampleMod，替换为你的新剧本ID，类似这样：\n完成 # 这样一个新的剧本就完成啦！启动游戏点击开始游戏，就可以看到你的剧本了，把这个剧本文件夹发给其它小伙伴，也可以看到这个剧本啦\n"},{"id":1,"href":"/docs/Install/","title":"安装与卸载","section":"Docs","content":" 安装与卸载 # 注意，使用Mod前记得保存原有的存档！\n虽然目前未发现损坏存档的情况，但是小心驶得万年船\n安装 # 下载安装包 # 下载Mod安装包\n安装文件 # 打开游戏根目录 将Mod安装包解压到游戏目录即可 请注意解压后的文件夹，确保图中红色的部分和游戏exe在同一级目录 # 如果不在同一级目录，可能是因为解压导致 Mod 外面多包了一层，复制出来就行\n完成 # 最后启动游戏，初次启动或游戏版本更新后启动时间较久，请稍等\n如果安装后游戏无法开启 # Failed to generate Il2Cpp interop assemblies 如果控制台出现红字 Failed to generate Il2Cpp interop assemblies\n这个报错是下载unity-libs组件失败，可能您的网络环境将下载地址屏蔽了。\n删除不可用的下载链接 #\n文本格式打开manosaba_game\\BepInEx\\config\\BepInEx.cfg文件，删除“UnityBaseLibrariesSource”后面的网址链接\n一定要删除，否则框架会自动清理下一步手动复制的文件\n手动复制文件 #\n手动从日志中的网址或交流群文件中下载压缩包，并解压到 manosaba_game\\BepInEx\\unity-libs 目录下\n完成 #\n卸载 # 删除文件 # 删除游戏目录下被解压的文件即可 "},{"id":2,"href":"/docs/Intruduce/ForUser/","title":"给使用的人","section":"介绍","content":" 给使用的人 # 我该从哪里获取到Mod框架？ # 可以在安装说明里找到下载地址，如果访问Github存在困难的话，也可以加入我们的群聊从群文件下载\n我该从哪里获取到可以玩的剧本？ # Mod框架内自带我写的一些渣作，如果你想游玩更好的内容，可以将这个Mod框架推荐给你喜欢的二创作者，来创作更多有趣的内容哦\n"},{"id":3,"href":"/docs/Intruduce/ForDeveloper/","title":"给想写剧本的人","section":"介绍","content":" 给想写剧本的人 # 关于这个Mod框架 # 《魔法少女的魔女裁判》是一款 Unity+NaniNovel 引擎开发的AVG游戏，而这个Mod框架则是基于BepInex实现对Unity引擎注入代码，将.nani剧本文件加载到NaniNovel引擎。\n因此本Mod框架加载的.nani脚本完全符合NaniNovel的官方标准，所使用的指令为官方支持的指令与游戏开发商自行开发的指令的合集。\n如果有一定的英语阅读能力，可以通过阅读NaniNovel的官方指引来快速掌握官方提供的基础引擎能力，而游戏开发商自行开发的指令，需要通过游戏内已有脚本反向推测功能。\n本文档也会继续完善部分指令的说明。\n想写剧本需要编程基础吗？会不会很难？ # 完全不需要编程基础，NaniNovel官方在剧本编写上做了非常友好的用户体验设计，基本不会出现代码逻辑相关的操作，只需要记住一些用于操作对话框，人物表情，背景变化的指令即可\n为什么不能直接提供解包资源和游戏自带剧本？ # 根据《魔法少女的魔女审判》直播・二次创作指南，不得超出二创范围使用拆包资源或者文字剧情，因此不提供任何现成的资源文件\n如果有二创需要，欢迎加入我们的群聊讨论，出于创作目的交流学习用的资源文件~\n我想发布我创作的剧本，有什么注意事项吗？ # 本Mod无额外要求，遵守官方《魔法少女的魔女审判》直播・二次创作指南即可\n如果愿意的话，在简介之类的地方提到我就很感谢了，如何能在B站艾特我的话，我一定会点赞投币关注的\n如果您愿意的话，也可以将您的作品发给我，我打包到Mod包中作为默认携带的剧本\n"},{"id":4,"href":"/docs/QuickStart/BeginAdv/","title":"开始一个简单的对话","section":"快速开始一段创作","content":" 开始一个简单的对话 # 让我们来写一个简短的对话剧本 # 调用游戏自身的初始化剧本 # 游戏自身准备了很多用于初始化的剧本，比如样例中的System/System_Subroutine.BeginAdv和System/System_Subroutine.EndAdv。\n在对话剧本的首尾通过gosub分别执行这两个初始化剧本，让游戏进入对话的模式\n当然，有对话模式，自然就有裁判模式，后续也会有用于初始化裁判模式的剧本\n;初始化日常活动状态 @Gosub System/System_Subroutine.BeginAdv ;结束日常活动状态 @Gosub System/System_Subroutine.EndAdv 展示背景 # 通过back指令可以修改游戏的背景\n可以通过解包工具Assetripper解包背景图资源查看对应的编号，也可以直接查看游戏自带的剧本寻找自己需要的背景的编号\n先指定 5_1 为背景图，再指定黑色的遮罩层图层消失\n;显示背景 @back 5_1 ;将最上面原本黑色的Overlay遮罩层变为透明，同时还指定了动画时间 @back SubId:\u0026#34;Overlay\u0026#34; Transparent tint:\u0026#34;#000000\u0026#34; time:0.99 wait:true 显示人物 # 通过char指令显示人物，显示的方式一般是{人物ID}.{表情,左手,右手}\n人物ID和表情相关可以通过解包工具Assetripper解包人物立绘查看，也可以直接查看游戏自带的剧本寻找自己需要的编号\n;显示艾玛 @char Ema pos:50,50 ;显示雪莉，表情是Smile1 @char Sherry.Smile1 pos:30,50 ;显示汉娜，表情是Angry1，双手是状态2 @char Hanna.Angry1,ArmR2,ArmL2 pos:70,50 隐藏人物 # 隐藏角色立绘可以通过hide指令隐藏指定立绘，也可以通过hidechars指令隐藏所有角色立绘\n;隐藏艾玛 @hide Ema ;隐藏全部角色 @hideChars 打印文字 # 打印文字有多种方法，可以使用print指令打印文字，也可以直接通过人物ID: 对话或纯文本的格式实现打印文字\n@print \u0026#34;完美犯罪？这词真让人热血沸腾呢！\u0026#34; author:\u0026#34;Sherry\u0026#34; speed:1 waitInput:true Wait:true Ema: 这是一个测试用例，我来客串一下。 Ema: 再说一句就下线了。 这里是一段空白。 结束剧本 # 可以通过goto指令跳转到Mod安装包内的Tool.nani里的EndToTitle标签实现返回到标题页\n也可以通过returntotitle指令直接返回到标题页，不过直接执行这个指令，可能会导致部分UI没有被隐藏，在返回标题页后仍旧残留在界面上\n;跳转到结束 @goto SherryAppleJuice_ExampleMod/Tools.EndToTitle 完整样例 # ;初始化日常活动状态 @gosub System/System_Subroutine.BeginAdv ;显示背景 @back 5_1 ;将最上面原本黑色的Overlay遮罩层变为透明，同时还指定了动画时间 @back SubId:\u0026#34;Overlay\u0026#34; Transparent tint:\u0026#34;#000000\u0026#34; time:0.99 wait:true ;显示艾玛 @char Ema pos:50,50 ;艾玛说话 Ema: 这是一个测试用例，我来客串一下。 Ema: 再说一句就下线了。 ;隐藏艾玛 @hide Ema 这里是一段空白。 ;显示雪莉，表情是Smile1 @char Sherry.Smile1 pos:30,50 ;雪莉说话 Sherry: 这是一个测试用例，我也来客串一下。 Sherry: 接下来请汉娜出场。 ;显示汉娜，表情是Angry1，双手是状态2 @char Hanna.Angry1,ArmR2,ArmL2 pos:70,50 ;汉娜说话 Hanna: 没事不要随便叫我出来啦。 ;隐藏全部角色 @hideChars ;结束日常活动状态 @gosub System/System_Subroutine.EndAdv ;跳转到结束 @goto SherryAppleJuice_ExampleMod/Tools.EndToTitle 如果出现红字 # Failed to load localization document for XXX 如果控制台出现红字 Failed to load localization document for XXX\n这个报错是本地化配置相关，参考这里~：\n"},{"id":5,"href":"/docs/Others/AQ/","title":"碎碎念","section":"其它说明","content":" 施工中 # "},{"id":6,"href":"/docs/Advanced/Command/","title":"指令介绍","section":"进阶文档","content":" 指令介绍 # back back # 官方指令back\n设置背景元素\n参数 说明 subid 指定层级，靠前的层级会遮挡靠后的，比如Middle会遮挡不设置时的默认层级 @back SubId:\u0026#34;Middle\u0026#34; 1_1 pos:10,30 Scale:1.8 bgm bgm # 官方指令bgm\n设置背景音乐\n@bgm \u0026#34;Ambi_11_1\u0026#34; char char # 官方指令char\n修改人物立绘\n参数 说明 subid 指定层级，靠前的层级会遮挡靠后的，比如Middle会遮挡不设置时的默认层级 @char SubId:\u0026#34;Middle\u0026#34; Warden.1 Scale:1.4 gosub gosub # 官方指令gosub\n跳转到指定路径，并在遇到 return 指令后返回\ngoto goto # 官方指令goto\n跳转到指定路径\nhide hide # 官方指令hide\n隐藏指定的actor(角色, 背景, 文字框, 选择框)\nhidechars hidechars # 官方指令hidechars\n隐藏所有可见的角色\nprint print # 官方指令print\n打印文本\nreturn return # 官方指令return\n返回到gosub指令的调用处\nreturntotitle returntotitle # 游戏指令returntotitle\n返回标题页\n参数 说明 time 动画时长 delay 延迟时间 wait 是否等待 voice voice # 官方指令voice\n播放指定角色对话声音\nwait wait # 官方指令wait\n等待直到条件满足，条件通常为时间的浮点数\n"},{"id":7,"href":"/docs/ModConfig/","title":"Mod配置","section":"Docs","content":" Mod配置 # 本Mod工具对于仅使用的人来说是开箱即用的，所有的设置选项都是面向需要编写剧本的人\n配置文件在 manosaba_game\\BepInEx\\config 目录下\nBepInex设置 # 配置文件名为 BepInEx.cfg，这个是来自于BepInEx框架的配置\n如果你需要查看调试输出信息的话，需要将 [Logging.Console] 和 [Logging.Disk] 下的 LogLevels 配置改为All\nMod设置 # 配置文件名为 ManosabaLoader.cfg，这个是来自于本Mod框架的配置\n参数 说明 OpenDebug 是否开启调试模式 IsDirectMode 是否跳过剧本选择菜单，直接进入预设入口 ScriptEnter 预设入口剧本文件 ScriptEnterLabel 预设入口剧本标签 ModRootPath 剧本根目录，不建议修改 Debug模式说明 # 当 OpenDebug 被设置为 true 时，将开启以下功能：\n按下 ctrl + t 打开控制台。控制台为NaniNovel官方控制台，包括执行剧本指令、打开调试信息面板等功能\n按下 ctrl + r 强制注销除了当前剧本外的剧本。当你修改剧本后发现重新进入剧本但修改没有生效时使用，建议在主菜单使用，避免出现非预期错误\n转发游戏日志到BepInex的控制台\n打印游戏尝试加载的资源路径\n"},{"id":8,"href":"/docs/Advanced/LoadBackgrounds/","title":"加载外部背景资源","section":"进阶文档","content":" 加载外部背景资源 # 本Mod支持加载外部背景资源，支持jpg和png格式图片\n在二创剧本中使用 # 创建背景图片目录 # 在Mod目录下创建文件夹Backgrounds，然后在里面创建文件夹MainBackground，将你需要添加的背景文件放在里面。这里样例的图片名称为 TaffyCover.jpg\n通过back指令加载背景 # 直接使用back指令+你刚才的背景文件名即可，效果如图：\n;设置背景为刚才添加的图片 @back TaffyCover 替换游戏背景 # 获取原图背景图片目录 # 可以通过解包工具Assetripper解包背景图资源查看对应的编号，也可以直接查看游戏自带的剧本寻找自己需要的背景的编号\n游戏内背景路径由两部分组成，Id和图片名称编号，如这个例子\n@back 140_2 Id:\u0026#34;Stills\u0026#34; Scale:{g_backgroundDefaultScale} time:0 这里Id为 Stills，图片名称编号为 140_2\n那么图片的路径对应为 Backgrounds/Stills/140_2\n如果游戏没有指定Id，那么默认Id为MainBackground\n覆盖原图 # 获取到游戏原图目录后，将二创图片的路径和名称改为和游戏图片一致，就可以覆盖游戏原图了，Mod加载剧本和资源的优先级都高于游戏原本资源\n"},{"id":9,"href":"/docs/QuickStart/BeginTrial/","title":"试试写一个魔女裁判","section":"快速开始一段创作","content":" 试试写一个魔女裁判 # 让我们来写一个简单的裁判 # 初始化裁判庭剧本 # 创建裁判庭初始化脚本TrialInit.nani，修改其中的设置\n主要关注点为出场人物，不出场的人物ID设为-1即可\n;设置出场人物位置ID，为-1的话就是未出席 @set \u0026#34;emaIdx = 0\u0026#34; @set \u0026#34;hiroIdx = 3\u0026#34; @set \u0026#34;meruruIdx = -1\u0026#34; @set \u0026#34;hannaIdx = 6\u0026#34; @set \u0026#34;sherryIdx = 9\u0026#34; @set \u0026#34;ananIdx = -1\u0026#34; @set \u0026#34;leiaIdx = -1\u0026#34; @set \u0026#34;cocoIdx = -1\u0026#34; @set \u0026#34;miriaIdx = -1\u0026#34; @set \u0026#34;margoIdx = -1\u0026#34; @set \u0026#34;noahIdx = -1\u0026#34; @set \u0026#34;nanokaIdx = -1\u0026#34; @set \u0026#34;alisaIdx = -1\u0026#34; @set \u0026#34;yukiIdx = -1\u0026#34; @set \u0026#34;wardenIdx = -1\u0026#34; @set \u0026#34;jailerIdx = -1\u0026#34; 调用游戏自身的初始化剧本 # 调用初始化剧本：SherryAppleJuice_ExampleTrialMod/TrialInit和System/System_Subroutine.EndTrial。\n在对话剧本的首尾通过gosub分别执行这两个初始化剧本\n;初始化日常活动状态 @gosub SherryAppleJuice_ExampleTrialMod/TrialInit ;结束裁判状态 @gosub System/System_Subroutine.EndTrial 设置裁判超时坏结局 # 通过timer指令设置倒计时\n通过set指令设置超时坏结局XXX，并创建Common/Common+XXX.nani文件，这个剧本文件就是坏结局的入口\n;设置倒计时 @timer 30 ;设置坏结局 @set \u0026#34;commonBadEndId=\\\u0026#34;SherryAppleJuice_ExampleTrialMod00\\\u0026#34;\u0026#34; 完整样例 # SherryAppleJuice_ExampleTrialMod/Main.nani\n;初始化裁判状态 @gosub SherryAppleJuice_ExampleTrialMod/TrialInit ;设置倒计时 @timer 30 ;设置坏结局 @set \u0026#34;commonBadEndId=\\\u0026#34;SherryAppleJuice_ExampleTrialMod00\\\u0026#34;\u0026#34; ;隐藏日常UI并显示裁判UI @HideUI ControlPanel @ShowUI DebateUI ;裁判循环起点 # Judge00 ;裁判循环起点初始化 @gosub System/System_Subroutine.BeginDebate-First ;播放裁判循环起点特效 @gosub System/System_Subroutine.BeginDebate-Effect @gosub System/System_Subroutine.BeginDebate-Last ;裁判开始倒计时 @pauseTrial false ;隐藏正交相机的场景，展示出裁判庭的3D场景 @hideStageScreen 1 ;将最上面原本黑色的Overlay遮罩层变为透明，同时还指定了动画时间 @back SubId:\u0026#34;Overlay\u0026#34; Transparent tint:\u0026#34;#000000\u0026#34; time:0.9 ;将镜头设置到艾玛脸上 @char Ema.Smile1 @gosubModifyCamera 0 look:\u0026#34;Ema\u0026#34; comp:\u0026#34;Left\u0026#34; rollDir:\u0026#34;Right\u0026#34; zoomLvl:3 @printDebate pos:70,50 Roll:4 \u0026#34;这是一个测试用例，\u0026lt;br\u0026gt;我来客串一下。\u0026#34; @printDebate pos:70,50 Roll:4 \u0026#34;我在左边，字在右边\u0026#34; ;将镜头设置到艾玛脸上，换个方向 @char Ema.Smile1 @gosubModifyCamera 0 look:\u0026#34;Ema\u0026#34; comp:\u0026#34;Center\u0026#34; zoomLvl:3 @printDebate pos:50,30 Roll:4 \u0026#34;我在中间，字在下面。\u0026#34; ;将镜头设置到艾玛脸上，换个方向 @char Ema.Angry1 @gosubModifyCamera 0 look:\u0026#34;Ema\u0026#34; comp:\u0026#34;Right\u0026#34; rollDir:\u0026#34;Left\u0026#34; zoomLvl:3 @printDebate pos:30,50 Roll:4 \u0026#34;我在右边，字在左边。\u0026#34; ;雪莉说了一个破绽 @char Sherry.Smile1 @gosubModifyCamera 0 look:\u0026#34;Sherry\u0026#34; comp:\u0026#34;Left\u0026#34; rollDir:\u0026#34;Right\u0026#34; zoomLvl:3 @printDebate pos:70,50 Roll:4 \u0026#34;这里有一个\u0026lt;link=\u0026#34;Right_Choice_000\u0026#34;\u0026gt;关键词\u0026lt;/link\u0026gt;，点进去就可以进入选项分支啦。\u0026#34; ;裁判循环终点初始化 @Gosub System/System_Subroutine.EndDebate-First @pauseTrial true ;播放裁判循环终点特效 @gosub System/System_Subroutine.EndDebate-Effect @gosub System/System_Subroutine.EndDebate-Last ;显示正交相机的场景 @showStageScreen 1 Ema: 到这里一轮辩论就结束啦 Ema: 接下来准备继续循环 ;回到裁判循环起点 @goto .Judge00 # Right_Choice_000 ;暂停倒计时 @pauseTrial true timer:true @choice \u0026#34;这个是正确的选项分支\u0026#34; button:\u0026#34;ChoiceButtons/Trial/Approval\u0026#34; handler:\u0026#34;Trial\u0026#34; ;播放有效 @sfx \u0026#34;Sfx_System_SaveData_001_2x\u0026#34; ;停止播放语音 @StopVoice ;关闭返回，使用这个指令后，点击选项就不会回到辩论循环了 @CancelGosub ;跳转到目标剧情 @goto .Right_Adv_000 @choice \u0026#34;这个是错误的选项分支\u0026#34; button:\u0026#34;ChoiceButtons/Trial/Objection\u0026#34; handler:\u0026#34;Trial\u0026#34; @sfx \u0026#34;Sfx_System_SaveData_001_2x\u0026#34; @StopVoice @CancelGosub @goto .Error_Adv_000 @choice \u0026#34;返回\u0026#34; button:\u0026#34;ChoiceButtons/Trial/Cancel\u0026#34; handler:\u0026#34;Trial\u0026#34; @pauseTrial false timer:true @Wait \u0026#34;i{debateWaitTime}\u0026#34; @Return @StopForChoice Clear:false # Right_Adv_000 @gosub System/System_Subroutine.EndDebate-First @pauseTrial false timer:false @gosub System/System_Subroutine.EndDebate-Last @char Hanna.Smile1 @gosubModifyCamera 0 look:\u0026#34;Hanna\u0026#34; comp:\u0026#34;Center\u0026#34; Hanna: 这个是正确的选项~ ;跳转到正确的路线 @goto .Right_End # Error_Adv_000 @gosub System/System_Subroutine.EndDebate-First @pauseTrial false timer:false @gosub System/System_Subroutine.EndDebate-Last @char Hanna.Angry1 @gosubModifyCamera 0 look:\u0026#34;Hanna\u0026#34; comp:\u0026#34;Center\u0026#34; Hanna: 这个是错误的选项！ Hanna: 我要返回到辩论循环让你重新选择了。 @goto .Judge00 # Right_End ;显示日常UI并隐藏裁判UI @HideUI DebateUI @ShowUI ControlPanel @char Ema.Smile1 @gosubModifyCamera 0 look:\u0026#34;Ema\u0026#34; comp:\u0026#34;Center\u0026#34; Ema: 裁判教程到这里就结束啦。 @gosub System/System_Subroutine.EndTrial ;跳转到结束 @goto SherryAppleJuice_ExampleTrialMod/Tools.EndToTitle SherryAppleJuice_ExampleTrialMod/TrialInit.nani\n;设置审判庭地点，有Court和CourtFinal两种，后者是决战时使用的版本 @set \u0026#34;stageName=\\\u0026#34;Court\\\u0026#34;\u0026#34; ;设置出庭人数，正常情况下是13个 @set \u0026#34;courtStandCount = 13\u0026#34; ;设置出场人物位置ID，为-1的话就是未出席 @set \u0026#34;emaIdx = 0\u0026#34; @set \u0026#34;hiroIdx = 3\u0026#34; @set \u0026#34;meruruIdx = -1\u0026#34; @set \u0026#34;hannaIdx = 6\u0026#34; @set \u0026#34;sherryIdx = 9\u0026#34; @set \u0026#34;ananIdx = -1\u0026#34; @set \u0026#34;leiaIdx = -1\u0026#34; @set \u0026#34;cocoIdx = -1\u0026#34; @set \u0026#34;miriaIdx = -1\u0026#34; @set \u0026#34;margoIdx = -1\u0026#34; @set \u0026#34;noahIdx = -1\u0026#34; @set \u0026#34;nanokaIdx = -1\u0026#34; @set \u0026#34;alisaIdx = -1\u0026#34; @set \u0026#34;yukiIdx = -1\u0026#34; @set \u0026#34;wardenIdx = -1\u0026#34; @set \u0026#34;jailerIdx = -1\u0026#34; ;初始化裁判 @gosub System/System_Subroutine.BeginTrial @return Common/CommonBadSherryAppleJuice_ExampleTrialMod00.nani\n;初始化日常活动状态 @gosub System/System_Subroutine.BeginAdv ;显示背景 @back 5_1 Scale:{g_backgroundDefaultScale} ;将最上面原本黑色的Overlay遮罩层变为透明，同时还指定了动画时间 @back SubId:\u0026#34;Overlay\u0026#34; Transparent tint:\u0026#34;#000000\u0026#34; time:0.99 wait:true ;显示艾玛 @char Ema pos:50,50 ;艾玛说话 Ema: 这是一个Bad End。 ;隐藏全部角色 @hideChars ;结束化日常活动状态 @gosub System/System_Subroutine.EndAdv ;跳转到结束 @goto SherryAppleJuice_ExampleMod/Tools.EndToTitle 如果出现红字 # Failed to load localization document for XXX 如果控制台出现红字 Failed to load localization document for XXX\n这个报错是本地化配置相关，参考这里~：\n"},{"id":10,"href":"/docs/Others/UsefulTools/","title":"一些有用的工具","section":"其它说明","content":" 一些有用的工具 # NaniNovel官方插件 # 在VsCode上使用的NaniNovel官方插件，可以将.nani格式的剧本文件语法高亮显示 Assetripper # Unity资源解包工具，可以用于查看游戏资源 "},{"id":11,"href":"/docs/Advanced/LoadVoice/","title":"加载外部音频资源","section":"进阶文档","content":" 加载外部音频资源 # 本Mod支持加载外部音频资源，支持wav格式，要求双声道采样率44100Hz\n在二创剧本中使用 # 创建背景图片目录 # 在Mod目录下创建文件夹Voice，将你需要添加的角色对话音频文件放在里面\n在Mod目录下创建文件夹Audio，将你需要添加的Bgm或音效音频文件放在里面\n通过bgm指令或voice指令播放音频 # 直接使用bgm指令或voice指令+你刚才的音频文件名即可：\n;播放Bgm_10_1 @bgm \u0026#34;Bgm_10_1\u0026#34; ;播放角色声音 TaffyStory000/Noah_01 @voice \u0026#34;TaffyStory000/Noah_01\u0026#34; 替换游戏音频 # 获取原图背景图片目录 # 可以通过解包工具Assetripper解包音频资源查看对应的编号，也可以直接查看游戏自带的剧本寻找自己需要的音频的编号\n覆盖原图 # 直接在Voice或者Audio目录下创建和游戏原音频同目录的二创音频文件即可\n"},{"id":12,"href":"/docs/Advanced/LoadCharacter/","title":"加载外部立绘资源","section":"进阶文档","content":" 加载外部立绘资源 # 本Mod支持加载外部立绘资源，支持jpg/png格式\n在二创剧本中使用 # 在info.json里创建角色ID # 打开剧本目录里的info.json，增加Characters字段，写上你要加的角色ID，类似这样：\n{ \u0026#34;Name\u0026#34;: \u0026#34;测试用例\u0026#34;, \u0026#34;Description\u0026#34;: \u0026#34;测试用例\u0026#34;, \u0026#34;Author\u0026#34;: \u0026#34;雪莉苹果汁\u0026#34;, \u0026#34;Enter\u0026#34;: \u0026#34;SherryAppleJuice_ExampleMod/Main\u0026#34;, \u0026#34;Characters\u0026#34;: [ { \u0026#34;ActorId\u0026#34;: \u0026#34;Taffy\u0026#34;, \u0026#34;DisplayName\u0026#34;: \u0026#34;\u0026lt;color=#FFC0CB\u0026gt;永\u0026lt;/color\u0026gt;雏塔菲\u0026#34; } ] } 创建背景图片目录 # 在Mod目录下创建Characters文件夹，在Characters文件夹内创建角色ID文件夹，类似这样创建Taffy文件夹\n在角色ID文件夹里面放上你想加载的立绘，如Hanna.jpg\n游戏原始立绘大小为1500x3000，可以参考这个大小来准备图片\n通过char指令展示角色 # 使用char指令展示立绘+角色ID.立绘图片名称即可展示立绘\n比如之前创建了Taffy文件夹，里面有一个Hanna.jpg，那么我显示这张图片的指令为：\n;显示立绘 @char Taffy.Hanna 效果类似：\n"},{"id":13,"href":"/docs/Advanced/MoreNaniFile/","title":"本地化配置","section":"进阶文档","content":" 本地化配置 # 为什么需要创建本地化文件？ # 游戏支持中日双语，因此存在本地化机制，所有打印文本相关的指令都会涉及到读取本地化配置的操作\n因此，在创建剧本文件时，需要同步创建本地化文件\n如果一个剧本涉及本地化相关，但是没有本地化文件的话，就会出现如下报错：\n什么样的nani文件需要创建本地化配置呢？ # 包含类似打印文本，选择分支，人名的文本都需要\n如果你不确定的话，全部nani文件都创建本地化文件就行\n创建本地化文件 # 在Mod目录下创建文件夹Text\\Scripts\\你的剧本文件夹名称\n然后创建和nani文件同名的txt文件\n如果你只想做中文内容，留空文件就行，如果你想做双语剧本，按照官方本地化格式填写多语文本即可\n"},{"id":14,"href":"/docs/Advanced/MapMenu/","title":"搜查示例","section":"进阶文档","content":" 搜查示例 # 如何在剧本中使用游戏的地图进行搜查，例子by雪覆山茶\n主剧本 # 创建背景图片目录 # 剧本通过map指令开启地图探索，玩家点击地点后，会返回一个flag值，可以根据flag值判断玩家点击的房间走入分支\n剧本代码 # @Gosub System/System_Subroutine.BeginAdv @update \u0026#34;F1\u0026#34; Category:\u0026#34;Map\u0026#34; Version:1 @update \u0026#34;F2\u0026#34; Category:\u0026#34;Map\u0026#34; Version:2 @update \u0026#34;B1\u0026#34; Category:\u0026#34;Map\u0026#34; Version:1 ;chosenAreaFlag中的数字应为2的你的房间总数次方减一 @if \u0026#34;chosenAreaFlag == 4194303\u0026#34; @set \u0026#34;chosenAreaFlag = 0\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true End/End @map RecreationRoom,Library,Infirmary,SolitaryConfinement,Lake,NoahStudio,Courtyard,BasementHallway,Lounge,EntranceHall,MessHall,Showers,ChamberSalamander,ChamberUndine,ChamberGnome,FrontGuesthouse,Warehouse,Courtroom,CourtroomHallway,PrisonEntrance,Wall,FlowerFields flag:\u0026#34;chosenAreaFlag\u0026#34; Back:false Global:false ;setflag中数字的顺序应与@map中房间的顺序相同 @if \u0026#34;chosenAreaId==\\\u0026#34;RecreationRoom\\\u0026#34;\u0026#34; @setFlag 0 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true RecreationRoom/RecreationRoom @if \u0026#34;chosenAreaId==\\\u0026#34;Library\\\u0026#34;\u0026#34; @setFlag 1 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true Library/Library @if \u0026#34;chosenAreaId==\\\u0026#34;Infirmary\\\u0026#34;\u0026#34; @setFlag 2 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true Infirmary/Infirmary @if \u0026#34;chosenAreaId==\\\u0026#34;SolitaryConfinement\\\u0026#34;\u0026#34; @setFlag 3 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true SolitaryConfinement/SolitaryConfinement @if \u0026#34;chosenAreaId==\\\u0026#34;Lake\\\u0026#34;\u0026#34; @setFlag 4 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true Lake/Lake @if \u0026#34;chosenAreaId==\\\u0026#34;NoahStudio\\\u0026#34;\u0026#34; @setFlag 5 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true NoahStudio/NoahStudio @if \u0026#34;chosenAreaId==\\\u0026#34;Courtyard\\\u0026#34;\u0026#34; @setFlag 6 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true Courtyard/Courtyard @if \u0026#34;chosenAreaId==\\\u0026#34;BasementHallway\\\u0026#34;\u0026#34; @setFlag 7 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true BasementHallway/BasementHallway @if \u0026#34;chosenAreaId==\\\u0026#34;Lounge\\\u0026#34;\u0026#34; @setFlag 8 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true Lounge/Lounge @if \u0026#34;chosenAreaId==\\\u0026#34;EntranceHall\\\u0026#34;\u0026#34; @setFlag 9 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true EntranceHall/EntranceHall @if \u0026#34;chosenAreaId==\\\u0026#34;MessHall\\\u0026#34;\u0026#34; @setFlag 10 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true MessHall/MessHall @if \u0026#34;chosenAreaId==\\\u0026#34;Showers\\\u0026#34;\u0026#34; @setFlag 11 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true Showers/Showers @if \u0026#34;chosenAreaId==\\\u0026#34;ChamberSalamander\\\u0026#34;\u0026#34; @setFlag 12 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true ChamberSalamander/ChamberSalamander @if \u0026#34;chosenAreaId==\\\u0026#34;ChamberUndine\\\u0026#34;\u0026#34; @setFlag 13 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true ChamberUndine/ChamberUndine @if \u0026#34;chosenAreaId==\\\u0026#34;ChamberGnome\\\u0026#34;\u0026#34; @setFlag 14 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true ChamberGnome/ChamberGnome @if \u0026#34;chosenAreaId==\\\u0026#34;FrontGuesthouse\\\u0026#34;\u0026#34; @setFlag 15 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true FrontGuesthouse/FrontGuesthouse @if \u0026#34;chosenAreaId==\\\u0026#34;Warehouse\\\u0026#34;\u0026#34; @setFlag 16 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true Warehouse/Warehouse @if \u0026#34;chosenAreaId==\\\u0026#34;Courtroom\\\u0026#34;\u0026#34; @setFlag 17 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true Courtroom/Courtroom @if \u0026#34;chosenAreaId==\\\u0026#34;CourtroomHallway\\\u0026#34;\u0026#34; @setFlag 18 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true CourtroomHallway/CourtroomHallway @if \u0026#34;chosenAreaId==\\\u0026#34;PrisonEntrance\\\u0026#34;\u0026#34; @setFlag 19 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true PrisonEntrance/PrisonEntrance @if \u0026#34;chosenAreaId==\\\u0026#34;Wall\\\u0026#34;\u0026#34; @setFlag 20 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true Wall/Wall @if \u0026#34;chosenAreaId==\\\u0026#34;FlowerFields\\\u0026#34;\u0026#34; @setFlag 21 var:\u0026#34;chosenAreaFlag\u0026#34; @Gosub System/System_Subroutine.EndAdv @goto soft:true FlowerFields/FlowerFields @StopForChoice Clear:false 例子下载 # 搜查示例\n"},{"id":15,"href":"/docs/QuickStart/Tips/","title":"小贴士","section":"快速开始一段创作","content":" 小贴士 # 这里记录一些大家遇到的问题和编写技巧\n希望实时看到指令对应的背景或人物怎么办？ # 打开Mod的调试模式，按下ctrl+t可以开启控制台，在控制台中输入剧本指令执行即可\n有的时候我设置了背景后人物就不显示了 # 可以关注一下back和back指令的SubId属性，如果背景在人物前，就会出现遮挡人物的情况，尽量保证在同一个层级演出，不同层级用于场景过渡~\n为什么我导入外部音频文件出现加速或者过慢的问题？ # 需要关注教程中声道和采样率的设置\n为什么choice指令出现分支指令不执行且只有第一个选项的情况？ # 这种问题大概率是缩进缺失，可以检查一下缩进是否和官方剧本缩进一致\n如果我想出现两个一样的人物怎么办？ # 使用不同的subid在不同图层显示角色即可，具体使用参考官方剧本\n如何旋转人物 # 使用char指令的rotation参数，参数类型为 x,y,z ，其中xyz为角度\n如果我想做双语剧本怎么办 # 参考这里~\n为什么不用官方的Bepinex？ # 截止开发插件完成，官方的Bepinex和游戏本体不兼容，存在GC处理异常的问题，所以这里单独上传修复后的版本\n"},{"id":16,"href":"/docs/LayerEditor/LayerEditor/","title":"立绘图层编辑","section":"立绘编辑器","content":"雪莉的立绘展示工具\n本工具由AI编写，可能有各种BUG，欢迎加群反馈\n"}]